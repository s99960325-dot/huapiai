import{A as g,d as q,x as z,c as P,a as l,w as o,k as p,E as f,r as n,o as b,B as A,m as T,h as m,i as y,q as h,C as j,_ as F}from"./index-cIS50Myt.js";function G(){return g.get("/api/workflow")}function H(_){return g.post("/api/workflow",_)}function J(_,d){return g.delete(`/api/workflow/${_}/${d}`)}const K={class:"workflow-view"},L={class:"card-header"},O=q({__name:"WorkflowView",setup(_){const d=p(!1),v=p(!1),u=p(!1),V=p([]),a=p({group_id:"",workflow_id:"",name:"",description:""}),k=async()=>{d.value=!0;try{const r=await G();V.value=r.workflows||[]}catch{f.error("加载数据失败")}finally{d.value=!1}},C=async()=>{v.value=!0;try{await H(a.value),f.success("创建成功"),u.value=!1,k()}catch{f.error("创建失败")}finally{v.value=!1}},x=r=>{f.info("编辑功能开发中")},B=async r=>{try{await h.confirm(`确定要删除工作流 "${r.name}" 吗？`,"提示",{type:"warning"}),await J(r.group_id,r.workflow_id),f.success("删除成功"),k()}catch{}};return z(()=>{k()}),(r,e)=>{const D=n("Plus"),$=n("el-icon"),i=n("el-button"),s=n("el-table-column"),E=n("el-table"),U=n("el-card"),c=n("el-input"),w=n("el-form-item"),W=n("el-form"),I=n("el-dialog"),M=j("loading");return b(),P("div",K,[l(U,null,{header:o(()=>[y("div",L,[e[8]||(e[8]=y("span",null,"工作流管理",-1)),l(i,{type:"primary",onClick:e[0]||(e[0]=t=>u.value=!0)},{default:o(()=>[l($,null,{default:o(()=>[l(D)]),_:1}),e[7]||(e[7]=m("创建工作流 ",-1))]),_:1})])]),default:o(()=>[A((b(),T(E,{data:V.value,stripe:""},{default:o(()=>[l(s,{prop:"group_id",label:"分组",width:"120"}),l(s,{prop:"workflow_id",label:"ID",width:"150"}),l(s,{prop:"name",label:"名称"}),l(s,{prop:"description",label:"描述","show-overflow-tooltip":""}),l(s,{prop:"block_count",label:"Block数量",width:"100"}),l(s,{label:"操作",width:"200"},{default:o(({row:t})=>[l(i,{type:"primary",size:"small",onClick:N=>x(t)},{default:o(()=>[...e[9]||(e[9]=[m("编辑",-1)])]),_:1},8,["onClick"]),l(i,{type:"danger",size:"small",onClick:N=>B(t)},{default:o(()=>[...e[10]||(e[10]=[m("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[M,d.value]])]),_:1}),l(I,{modelValue:u.value,"onUpdate:modelValue":e[6]||(e[6]=t=>u.value=t),title:"创建工作流",width:"600px"},{footer:o(()=>[l(i,{onClick:e[5]||(e[5]=t=>u.value=!1)},{default:o(()=>[...e[11]||(e[11]=[m("取消",-1)])]),_:1}),l(i,{type:"primary",onClick:C,loading:v.value},{default:o(()=>[...e[12]||(e[12]=[m("确定",-1)])]),_:1},8,["loading"])]),default:o(()=>[l(W,{model:a.value,"label-width":"100px"},{default:o(()=>[l(w,{label:"分组"},{default:o(()=>[l(c,{modelValue:a.value.group_id,"onUpdate:modelValue":e[1]||(e[1]=t=>a.value.group_id=t),placeholder:"例如: chat"},null,8,["modelValue"])]),_:1}),l(w,{label:"ID"},{default:o(()=>[l(c,{modelValue:a.value.workflow_id,"onUpdate:modelValue":e[2]||(e[2]=t=>a.value.workflow_id=t),placeholder:"例如: normal"},null,8,["modelValue"])]),_:1}),l(w,{label:"名称"},{default:o(()=>[l(c,{modelValue:a.value.name,"onUpdate:modelValue":e[3]||(e[3]=t=>a.value.name=t),placeholder:"工作流名称"},null,8,["modelValue"])]),_:1}),l(w,{label:"描述"},{default:o(()=>[l(c,{modelValue:a.value.description,"onUpdate:modelValue":e[4]||(e[4]=t=>a.value.description=t),type:"textarea",rows:3},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),R=F(O,[["__scopeId","data-v-a00526c2"]]);export{R as default};
