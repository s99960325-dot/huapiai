import{A as b,d as S,x as j,c as B,a as l,w as t,k as u,E as c,r as n,o as v,B as G,m as L,h as d,v as M,i as D,F as H,n as J,q as O,C as Q,_ as W}from"./index-cIS50Myt.js";function X(){return b.get("/api/llm/types")}function Y(){return b.get("/api/llm/backends")}function Z(_){return b.post("/api/llm/backends",_)}function h(_){return b.delete(`/api/llm/backends/${_}`)}const ee={class:"llm-view"},le={class:"card-header"},ae=S({__name:"LLMView",setup(_){const g=u(!1),y=u(!1),r=u(!1),C=u([]),x=u([]),o=u({name:"",adapter:"",config:{api_key:"",api_base:""},enable:!0,models:[]}),k=async()=>{var s;g.value=!0;try{const e=await Y(),V=await X();C.value=((s=e.data)==null?void 0:s.backends)||[],x.value=V.types||[]}catch{c.error("加载数据失败")}finally{g.value=!1}},U=async()=>{y.value=!0;try{await Z(o.value),c.success("创建成功"),r.value=!1,k()}catch{c.error("创建失败")}finally{y.value=!1}},$=s=>{c.info("编辑功能开发中")},E=async s=>{try{await O.confirm(`确定要删除后端 "${s.name}" 吗？`,"提示",{type:"warning"}),await h(s.name),c.success("删除成功"),k()}catch{}};return j(()=>{k()}),(s,e)=>{const V=n("Plus"),A=n("el-icon"),i=n("el-button"),p=n("el-table-column"),P=n("el-tag"),I=n("el-table"),N=n("el-card"),w=n("el-input"),m=n("el-form-item"),T=n("el-option"),q=n("el-select"),z=n("el-switch"),F=n("el-form"),R=n("el-dialog"),K=Q("loading");return v(),B("div",ee,[l(N,null,{header:t(()=>[D("div",le,[e[9]||(e[9]=D("span",null,"大语言模型管理",-1)),l(i,{type:"primary",onClick:e[0]||(e[0]=a=>r.value=!0)},{default:t(()=>[l(A,null,{default:t(()=>[l(V)]),_:1}),e[8]||(e[8]=d("添加后端 ",-1))]),_:1})])]),default:t(()=>[G((v(),L(I,{data:C.value,stripe:""},{default:t(()=>[l(p,{prop:"name",label:"名称"}),l(p,{prop:"adapter",label:"适配器"}),l(p,{prop:"enable",label:"状态"},{default:t(({row:a})=>[l(P,{type:a.enable?"success":"danger"},{default:t(()=>[d(M(a.enable?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(p,{label:"模型数量"},{default:t(({row:a})=>{var f;return[d(M(((f=a.models)==null?void 0:f.length)||0),1)]}),_:1}),l(p,{label:"操作",width:"200"},{default:t(({row:a})=>[l(i,{type:"primary",size:"small",onClick:f=>$(a)},{default:t(()=>[...e[10]||(e[10]=[d("编辑",-1)])]),_:1},8,["onClick"]),l(i,{type:"danger",size:"small",onClick:f=>E(a)},{default:t(()=>[...e[11]||(e[11]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[K,g.value]])]),_:1}),l(R,{modelValue:r.value,"onUpdate:modelValue":e[7]||(e[7]=a=>r.value=a),title:"添加LLM后端",width:"600px"},{footer:t(()=>[l(i,{onClick:e[6]||(e[6]=a=>r.value=!1)},{default:t(()=>[...e[12]||(e[12]=[d("取消",-1)])]),_:1}),l(i,{type:"primary",onClick:U,loading:y.value},{default:t(()=>[...e[13]||(e[13]=[d("确定",-1)])]),_:1},8,["loading"])]),default:t(()=>[l(F,{model:o.value,"label-width":"100px"},{default:t(()=>[l(m,{label:"名称"},{default:t(()=>[l(w,{modelValue:o.value.name,"onUpdate:modelValue":e[1]||(e[1]=a=>o.value.name=a),placeholder:"请输入后端名称"},null,8,["modelValue"])]),_:1}),l(m,{label:"适配器"},{default:t(()=>[l(q,{modelValue:o.value.adapter,"onUpdate:modelValue":e[2]||(e[2]=a=>o.value.adapter=a),placeholder:"选择适配器类型"},{default:t(()=>[(v(!0),B(H,null,J(x.value,a=>(v(),L(T,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(m,{label:"API Key"},{default:t(()=>[l(w,{modelValue:o.value.config.api_key,"onUpdate:modelValue":e[3]||(e[3]=a=>o.value.config.api_key=a),type:"password","show-password":""},null,8,["modelValue"])]),_:1}),l(m,{label:"API Base"},{default:t(()=>[l(w,{modelValue:o.value.config.api_base,"onUpdate:modelValue":e[4]||(e[4]=a=>o.value.config.api_base=a),placeholder:"https://api.example.com/v1"},null,8,["modelValue"])]),_:1}),l(m,{label:"启用"},{default:t(()=>[l(z,{modelValue:o.value.enable,"onUpdate:modelValue":e[5]||(e[5]=a=>o.value.enable=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}}),ne=W(ae,[["__scopeId","data-v-75018636"]]);export{ne as default};
