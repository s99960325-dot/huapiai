import{d as V,x as D,c as _,a as t,w as a,E as B,r as l,k as f,o as n,F as E,n as F,i as e,v,y as g,h as b,m as C,z as S,t as N,_ as z}from"./index-cIS50Myt.js";import{g as I,a as L}from"./system-COZ-n8x3.js";const R={class:"dashboard"},$={class:"stat-content"},A={class:"stat-info"},U={class:"stat-value"},P={class:"stat-title"},T={key:0,class:"status-list"},j={class:"status-item"},q={class:"value"},G={class:"status-item"},H={class:"status-item"},J={key:0,class:"version-info"},K={class:"version-item"},O={class:"version-item"},Q={key:0,class:"update-tip"},W=V({__name:"DashboardView",setup(X){const i=f([{title:"LLM 后端",value:0,icon:"ChatDotRound",color:"#409EFF"},{title:"IM 适配器",value:0,icon:"Message",color:"#67C23A"},{title:"工作流",value:0,icon:"Connection",color:"#E6A23C"},{title:"插件",value:0,icon:"Box",color:"#F56C6C"}]),c=f(null),r=f(null),k=o=>{const s=Math.floor(o/86400),p=Math.floor(o%86400/3600),u=Math.floor(o%3600/60);return`${s}天 ${p}小时 ${u}分钟`},x=async()=>{try{const o=await I(),s=await L();c.value=o,r.value=s,i.value[0].value=o.llm_backends||0,i.value[1].value=o.im_adapters||0,i.value[2].value=o.workflows||0,i.value[3].value=o.plugins||0}catch{B.error("加载数据失败")}};return D(()=>{x()}),(o,s)=>{const p=l("el-icon"),u=l("el-card"),m=l("el-col"),h=l("el-row"),y=l("el-progress"),w=l("el-tag"),M=l("el-alert");return n(),_("div",R,[t(h,{gutter:20},{default:a(()=>[(n(!0),_(E,null,F(i.value,d=>(n(),C(m,{span:6,key:d.title},{default:a(()=>[t(u,{class:"stat-card",shadow:"hover"},{default:a(()=>[e("div",$,[e("div",{class:"stat-icon",style:S({backgroundColor:d.color})},[t(p,{size:"32",color:"#fff"},{default:a(()=>[(n(),C(N(d.icon)))]),_:2},1024)],4),e("div",A,[e("div",U,v(d.value),1),e("div",P,v(d.title),1)])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),t(h,{gutter:20,style:{"margin-top":"20px"}},{default:a(()=>[t(m,{span:12},{default:a(()=>[t(u,null,{header:a(()=>[...s[0]||(s[0]=[e("div",{class:"card-header"},[e("span",null,"系统状态")],-1)])]),default:a(()=>[c.value?(n(),_("div",T,[e("div",j,[s[1]||(s[1]=e("span",{class:"label"},"运行时间",-1)),e("span",q,v(k(c.value.uptime)),1)]),e("div",G,[s[2]||(s[2]=e("span",{class:"label"},"CPU 使用率",-1)),t(y,{percentage:c.value.cpu_usage},null,8,["percentage"])]),e("div",H,[s[3]||(s[3]=e("span",{class:"label"},"内存使用",-1)),t(y,{percentage:c.value.memory_usage},null,8,["percentage"])])])):g("",!0)]),_:1})]),_:1}),t(m,{span:12},{default:a(()=>[t(u,null,{header:a(()=>[...s[4]||(s[4]=[e("div",{class:"card-header"},[e("span",null,"版本信息")],-1)])]),default:a(()=>[r.value?(n(),_("div",J,[e("div",K,[s[5]||(s[5]=e("span",{class:"label"},"当前版本",-1)),t(w,null,{default:a(()=>[b(v(r.value.current_version),1)]),_:1})]),e("div",O,[s[6]||(s[6]=e("span",{class:"label"},"最新版本",-1)),t(w,{type:r.value.has_update?"warning":"success"},{default:a(()=>[b(v(r.value.latest_version),1)]),_:1},8,["type"])]),r.value.has_update?(n(),_("div",Q,[t(M,{title:"发现新版本",type:"warning",closable:!1,"show-icon":""})])):g("",!0)])):g("",!0)]),_:1})]),_:1})]),_:1})])}}}),ee=z(W,[["__scopeId","data-v-ab74b42a"]]);export{ee as default};
