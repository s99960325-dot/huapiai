import{d as y,u as h,o as C,c as E,i as x,p as B,q as $,w as s,e as a,s as D,r as p,E as i,v as V,a as o,x as l,m as f,n as w,y as I,g as M,h as k}from"./index-e4srcsQT.js";const q=y({__name:"WorkflowListView",setup(N){const m=M(),n=h(),u=p([]),r=p(!1);async function d(){r.value=!0;try{const e=await n.client.get("/api/workflow");u.value=e.workflows||[]}catch(e){i.error(e.message)}finally{r.value=!1}}function g(e){m.push({name:"workflow-detail",params:{groupId:e.group_id,workflowId:e.workflow_id}})}async function _(e){await I.confirm(`确定删除工作流「${e.name}」？`);try{await n.client.delete(`/api/workflow/${e.group_id}/${e.workflow_id}`),i.success("已删除"),d()}catch(t){i.error(t.message)}}return C(d),(e,t)=>{const v=V("loading");return k(),E("div",null,[t[2]||(t[2]=x("h3",null,"工作流列表",-1)),B((k(),$(a(D),{data:u.value,stripe:""},{default:s(()=>[o(a(l),{prop:"group_id",label:"分组",width:"120"}),o(a(l),{prop:"workflow_id",label:"ID",width:"140"}),o(a(l),{prop:"name",label:"名称"}),o(a(l),{prop:"description",label:"描述"}),o(a(l),{prop:"block_count",label:"块数",width:"80"}),o(a(l),{label:"操作",width:"160"},{default:s(({row:c})=>[o(a(f),{link:"",type:"primary",onClick:b=>g(c)},{default:s(()=>[...t[0]||(t[0]=[w("编辑",-1)])]),_:1},8,["onClick"]),o(a(f),{link:"",type:"danger",onClick:b=>_(c)},{default:s(()=>[...t[1]||(t[1]=[w("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[v,r.value]])])}}});export{q as default};
