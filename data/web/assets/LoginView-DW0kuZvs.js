import{d as v,u as g,o as w,E as t,c as p,a as o,w as n,b as h,e as l,f as y,r as u,g as V,h as m,i as E,j as k,k as x,l as b,m as B,n as C,t as F,_ as N}from"./index-e4srcsQT.js";const I={class:"login-page"},M={key:0},S=v({__name:"LoginView",setup(T){const f=V(),i=g(),e=u(""),a=u(!1),r=u(!1);w(async()=>{try{a.value=await i.checkFirstTime()}catch{t.error("无法连接后端")}});async function c(){if(!e.value){t.warning("请输入密码");return}r.value=!0;try{await i.login(e.value),t.success(a.value?"首次设置成功":"登录成功"),f.push("/")}catch(d){t.error(d.message||"登录失败")}finally{r.value=!1}}return(d,s)=>(m(),p("div",I,[o(l(y),{class:"form",onSubmit:h(c,["prevent"])},{default:n(()=>[s[1]||(s[1]=E("h2",null,"Kirara 开发者门户",-1)),a.value?(m(),p("p",M,"首次使用，请设置管理员密码")):k("",!0),o(l(x),{label:"密码"},{default:n(()=>[o(l(b),{modelValue:e.value,"onUpdate:modelValue":s[0]||(s[0]=_=>e.value=_),type:"password",placeholder:"密码","show-password":""},null,8,["modelValue"])]),_:1}),o(l(B),{type:"primary",loading:r.value,onClick:c},{default:n(()=>[C(F(a.value?"设置密码":"登录"),1)]),_:1},8,["loading"])]),_:1})]))}}),j=N(S,[["__scopeId","data-v-3e3c9330"]]);export{j as default};
