import{d as U,u as A,o as F,p as M,c as r,i as d,a as t,w as n,e as o,m as x,F as v,z as R,t as a,A as b,j as S,r as g,E as _,v as j,B as D,h as i,n as c,C as m,l as E,D as z,G,g as L}from"./index-e4srcsQT.js";const T={style:{"margin-bottom":"16px"}},W={style:{"margin-top":"16px"}},J=U({__name:"WorkflowDetailView",setup(q){const w=G(),I=L(),k=A(),e=g(null),p=g(!1),f=g(!1),y=D(()=>w.params.groupId),V=D(()=>w.params.workflowId);async function C(){p.value=!0;try{const s=await k.client.get(`/api/workflow/${y.value}/${V.value}`);e.value=s.workflow}catch(s){_.error(s.message)}finally{p.value=!1}}async function h(){if(e.value){f.value=!0;try{await k.client.put(`/api/workflow/${y.value}/${V.value}`,e.value),_.success("已保存")}catch(s){_.error(s.message)}finally{f.value=!1}}}function B(){I.push({name:"workflows"})}return F(C),(s,u)=>{const N=j("loading");return M((i(),r("div",null,[d("div",T,[t(o(x),{onClick:B},{default:n(()=>[...u[3]||(u[3]=[c("返回",-1)])]),_:1}),t(o(x),{type:"primary",loading:f.value,onClick:h},{default:n(()=>[...u[4]||(u[4]=[c("保存",-1)])]),_:1},8,["loading"])]),e.value?(i(),r(v,{key:0},[t(o(R),{column:2,border:""},{default:n(()=>[t(o(m),{label:"分组"},{default:n(()=>[c(a(e.value.group_id),1)]),_:1}),t(o(m),{label:"ID"},{default:n(()=>[c(a(e.value.workflow_id),1)]),_:1}),t(o(m),{label:"名称"},{default:n(()=>[t(o(E),{modelValue:e.value.name,"onUpdate:modelValue":u[0]||(u[0]=l=>e.value.name=l)},null,8,["modelValue"])]),_:1}),t(o(m),{label:"描述"},{default:n(()=>[t(o(E),{modelValue:e.value.description,"onUpdate:modelValue":u[1]||(u[1]=l=>e.value.description=l),type:"textarea"},null,8,["modelValue"])]),_:1}),t(o(m),{label:"超时(秒)"},{default:n(()=>[t(o(z),{modelValue:e.value.config.max_execution_time,"onUpdate:modelValue":u[2]||(u[2]=l=>e.value.config.max_execution_time=l),min:0},null,8,["modelValue"])]),_:1})]),_:1}),d("h4",W,"块 ("+a(e.value.blocks.length)+")",1),d("ul",null,[(i(!0),r(v,null,b(e.value.blocks,l=>(i(),r("li",{key:l.name},a(l.name)+" ("+a(l.type_name)+") @ ("+a(l.position.x)+", "+a(l.position.y)+") ",1))),128))]),d("h4",null,"连线 ("+a(e.value.wires.length)+")",1),d("ul",null,[(i(!0),r(v,null,b(e.value.wires,(l,$)=>(i(),r("li",{key:$},a(l.source_block)+"."+a(l.source_output)+" → "+a(l.target_block)+"."+a(l.target_input),1))),128))])],64)):S("",!0)])),[[N,p.value]])}}});export{J as default};
