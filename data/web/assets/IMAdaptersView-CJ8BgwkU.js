import{d as h,u as C,o as E,c as b,i as x,p as B,q as p,w as n,e as t,s as M,r as y,E as i,v as T,h as r,a as l,x as o,H as V,n as f,t as $,m as g}from"./index-e4srcsQT.js";const A=h({__name:"IMAdaptersView",setup(D){const c=C(),m=y([]),u=y(!1);async function d(){u.value=!0;try{const a=await c.client.get("/api/im/adapters");m.value=a.adapters||[]}catch(a){i.error(a.message)}finally{u.value=!1}}async function v(a){try{await c.client.post(`/api/im/adapters/${a.name}/start`),i.success("已启动"),d()}catch(e){i.error(e.message)}}async function _(a){try{await c.client.post(`/api/im/adapters/${a.name}/stop`),i.success("已停止"),d()}catch(e){i.error(e.message)}}return E(d),(a,e)=>{const k=T("loading");return r(),b("div",null,[e[2]||(e[2]=x("h3",null,"IM 适配器",-1)),B((r(),p(t(M),{data:m.value,stripe:""},{default:n(()=>[l(t(o),{prop:"name",label:"名称",width:"160"}),l(t(o),{prop:"adapter",label:"类型",width:"120"}),l(t(o),{label:"状态",width:"100"},{default:n(({row:s})=>[l(t(V),{type:s.is_running?"success":"info"},{default:n(()=>[f($(s.is_running?"运行中":"已停止"),1)]),_:2},1032,["type"])]),_:1}),l(t(o),{label:"操作",width:"160"},{default:n(({row:s})=>[s.is_running?(r(),p(t(g),{key:1,link:"",type:"warning",onClick:w=>_(s)},{default:n(()=>[...e[1]||(e[1]=[f("停止",-1)])]),_:1},8,["onClick"])):(r(),p(t(g),{key:0,link:"",type:"primary",onClick:w=>v(s)},{default:n(()=>[...e[0]||(e[0]=[f("启动",-1)])]),_:1},8,["onClick"]))]),_:1})]),_:1},8,["data"])),[[k,u.value]])])}}});export{A as default};
